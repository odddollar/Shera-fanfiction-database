<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">

    <title>View fanfiction recommendations</title>

    <script>
        function redirect() {
            location.href = "/updatecompletions"
        }
    </script>
</head>
<body>
    <div id="content" class="container-fluid">
		<nav class="navbar navbar-light navbar-expand-md" style="background: rgb(192,195,197);border-radius: 5px;margin: 0;margin-top: 15px;margin-bottom: 6px;" id="nav-bar">
			<div class="container-fluid">
				<a class="navbar-brand" href="/">She-ra Fanfictions</a>
				<button data-toggle="collapse" data-target="#navcol-1" class="navbar-toggler">
					<span class="sr-only">Toggle navigation</span>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse d-md-flex d-xl-flex justify-content-md-end justify-content-xl-end" id="navcol-1">
					<ul class="nav navbar-nav">
						<li class="nav-item"><a class="nav-link" href="/">Home</a></li>
						<li class="nav-item"><a class="nav-link" href="/submit">Submit</a></li>
						<li class="nav-item"><a class="nav-link active" href="/database">Database</a></li>
					</ul>
				</div>
			</div>
		</nav>
        <div class="jumbotron">
            <h1 id="title" class="text-center">Database</h1>
            <h5 id="total-entries" class="text-center">Total entries: {{len(rows)}}</h5>
            <button type="button" class="btn btn-secondary" onclick="redirect()">Update completion statuses</button>
            <table id="data" class="table table-striped table-condensed">
                <thead id="column-headers">
                    <tr>
                        <th>ID</th>
                        <th>URL</th>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Rating</th>
                        <th>Warnings</th>
                        <th>Universe</th>
                        <th>Summary</th>
                        <th>Notes</th>
                        <th>Completion</th>
                    </tr>
                </thead>
                <tbody>
                    %for row in rows:
                        <tr>
                            %for col in range(len(row)):
                                %if not str(row[col]).find("archiveofourown.org") == -1:
                                    <td><a href="{{row[col]}}" target="_blank">{{row[col]}}</a></td>
                                %elif col == 0:
                                    <th scope="row">{{row[col]}}</th>
                                %else:
                                    <td>{{row[col]}}</td>
                                %end
                            %end
                        </tr>
                    %end
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>